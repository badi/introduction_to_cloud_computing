<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Using Hadoop in FutureGrid &mdash; my Cloudmesh Learning documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     'Learning',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="top" title="my Cloudmesh Learning documentation" href="../index.html" />
    <link rel="up" title="PaaS" href="index.html" />
    <link rel="next" title="HPC" href="../hpc/index.html" />
    <link rel="prev" title="PaaS" href="index.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">




  <div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><img src="../_static/cm-logo-24.png">
          my Cloudmesh</a>
        <span class="navbar-text navbar-version pull-left"><b>Learning</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../about.html#indepent-study-at-iu">Indepent Study at IU</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../about.html#cloud-topics">Cloud Topics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about.html#data-topics">Data Topics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../about.html#student-employment-at-iu">Student Employment at IU</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about.html#contributing-to-the-manual">Contributing to the Manual</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ipython/index.html">IPython</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ipython/_ipython.html">IPython</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../ipython/_ipython.html#command-execution">Command Execution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ipython/_ipython.html#environment-variables">Environment Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ipython/_ipython.html#variables">Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ipython/_ipython.html#surpressing-output">Surpressing output</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../parallel.html">Parallel Shell</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../parallel.html#parallel-distributed-shell-pdsh">Parallel Distributed Shell (pdsh)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../parallel.html#fabric">Fabric</a></li>
<li class="toctree-l2"><a class="reference internal" href="../parallel.html#cloudmesh-parallel-api">Cloudmesh Parallel API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../parallel.html#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../parallel.html#code">Code</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../parallel.html#exercises">Exercises</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../cloudmesh/index.html">Cloudmesh</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../cloudmesh/setup/index.html">Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cloudmesh/setup/quickstart.html">Quick Start on your desktop</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cloudmesh/setup/quickstart.html#commands-without-description">Commands without description</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cloudmesh/setup/quickstart.html#one-line-install-with-curl">One line install with curl</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../cloudmesh/setup/yaml.html">Creating the yaml file</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cloudmesh/setup/yaml.html#adding-futuregrid-openstack-clouds-on-sierra-and-india-to-the-yaml-file">Adding FutureGrid Openstack clouds on sierra and india to the yaml file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cloudmesh/setup/yaml.html#adding-futuregrid-openstack-clouds-on-alamo-and-hotel-to-the-yaml-file">Adding FutureGrid OpenStack Clouds on alamo and hotel to the yaml file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cloudmesh/setup/yaml.html#adding-hp-cloud-to-the-yaml-file">Adding HP cloud to the yaml file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cloudmesh/setup/yaml.html#adding-aws-to-the-yaml-file">Adding AWS to the yaml file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cloudmesh/setup/yaml.html#adding-azure-to-the-yaml-file">Adding Azure to the yaml file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cloudmesh/setup/yaml.html#adding-devstack-to-the-yaml-file-tbd">Adding devstack to the yaml file (TBD)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cloudmesh/setup/yaml.html#adding-dreamhost-to-the-yaml-file">Adding dreamhost to the yaml file</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../cloudmesh/setup/setup_openstack.html">Setup Cloudmesh in an Openstack VM for Testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cloudmesh/setup/setup_vagrant.html">Setup Cloudmesh in an VirtualBox VM with Vagrant for Testing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cloudmesh/setup/setup_vagrant.html#download-cloudmesh">Download cloudmesh</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cloudmesh/setup/setup_vagrant.html#install-vagrant-and-virtualbox">Install Vagrant and VirtualBox</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cloudmesh/setup/setup_vagrant.html#install-veewee-optional">Install Veewee (Optional)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cloudmesh/setup/setup_vagrant.html#vagrant-up">Vagrant up</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../cloudmesh/setup/setup_vagrant.html#futuregrid-portal-id">FutureGrid Portal ID</a></li>
<li class="toctree-l5"><a class="reference internal" href="../cloudmesh/setup/setup_vagrant.html#base-image">Base Image</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../cloudmesh/setup/setup_vagrant.html#vagrant-ssh">Vagrant ssh</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cloudmesh/setup/setup_vagrant.html#virtualenv-and-cm">Virtualenv and cm</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../cloudmesh/setup/setup_azure.html">Adding Azure to the yaml file</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cloudmesh/setup/setup_azure.html#azure-account">Azure account</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cloudmesh/setup/setup_azure.html#download-credentials">Download credentials</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cloudmesh/setup/setup_azure.html#install-azure-cli">Install Azure CLI</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../cloudmesh/setup/setup_azure.html#linux">Linux</a></li>
<li class="toctree-l5"><a class="reference internal" href="../cloudmesh/setup/setup_azure.html#osx">OSX</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../cloudmesh/setup/setup_azure.html#import-credentials-via-azure-cli">Import Credentials via Azure CLI</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cloudmesh/setup/setup_azure.html#download-subscription-file-publishsettings">Download Subscription File (.publishsettings)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cloudmesh/setup/setup_azure.html#place-x-509-certificate-on-cloudmesh">Place X.509 certificate on Cloudmesh</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cloudmesh/setup/setup_azure.html#replace-subscription-id">Replace Subscription ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cloudmesh/setup/setup_azure.html#test-azure-virtual-machine">Test Azure Virtual Machine</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cloudmesh/cm/index.html">Cloudmesh cm</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cloudmesh/cm/_cm.html">Cloudmesh <tt class="docutils literal"><span class="pre">cm</span></tt> Command</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cloudmesh/cm/_cm.html#ipython-execution-of-shell-commands">iPython Execution of shell commands</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../cloudmesh/cm/_cm.html#ipython-alias">IPython Alias</a></li>
<li class="toctree-l5"><a class="reference internal" href="../cloudmesh/cm/_cm.html#python-rehashx">Python %rehashx</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../cloudmesh/cm/_cm.html#cm-command"><tt class="docutils literal"><span class="pre">cm</span></tt> Command</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../cloudmesh/cm/_cm.html#help">Help</a></li>
<li class="toctree-l5"><a class="reference internal" href="../cloudmesh/cm/_cm.html#starting-the-web-browser">Starting the Web Browser</a></li>
<li class="toctree-l5"><a class="reference internal" href="../cloudmesh/cm/_cm.html#listing-clouds">Listing Clouds</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cloudmesh/api/index.html">Cloudmesh API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cloudmesh/api/_hello.html">Cloudmesh API Initialization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cloudmesh/api/_hello.html#version">Version</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../cloudmesh/api/_uuid.html">Defining Names</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cloudmesh/api/_uuid.html#uuids">UUIDs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cloudmesh/api/_uuid.html#machine-dependent-uuid">Machine dependent uuid</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cloudmesh/api/_uuid.html#random-uuid">Random Uuid</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cloudmesh/api/_uuid.html#cloudmesh-get-unique-name">Cloudmesh get_unique_name</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cloudmesh/api/_uuid.html#generating-vm-names">Generating VM names</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cloudmesh/shell/index.html">Cloudmesh Shell</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cloudmesh/shell/_introduction.html">Cloudmesh Shell API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cloudmesh/shell/_overview.html">Cloudmesh Shell</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cloudmesh/shell/_overview.html#initialization">Initialization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cloudmesh/shell/_overview.html#activating-clouds">Activating Clouds</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cloudmesh/shell/_overview.html#starting-vms">Starting VMs</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../cloudmesh/shell/_overview.html#set-default-image">set default image</a></li>
<li class="toctree-l5"><a class="reference internal" href="../cloudmesh/shell/_overview.html#set-default-flavor">set default flavor</a></li>
<li class="toctree-l5"><a class="reference internal" href="../cloudmesh/shell/_overview.html#set-default-cloud">set default cloud</a></li>
<li class="toctree-l5"><a class="reference internal" href="../cloudmesh/shell/_overview.html#simple-way-to-start-a-vm">simple way to start a VM</a></li>
<li class="toctree-l5"><a class="reference internal" href="../cloudmesh/shell/_overview.html#set-default-vm-name">set default VM name</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../cloudmesh/shell/_overview.html#refreshing-vm-status">Refreshing VM status</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cloudmesh/shell/_overview.html#starting-multiple-vms">Starting multiple VMs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cloudmesh/shell/_overview.html#deleting-vms">Deleting VMs</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../iaas/index.html">IaaS</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../iaas/index.html#openstack-clouds">OpenStack Clouds</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../iaas/openstack.html">OpenStack on FutureGrid</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../iaas/openstack.html#login">Login</a></li>
<li class="toctree-l4"><a class="reference internal" href="../iaas/openstack.html#setup-openstack-environment">Setup OpenStack Environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../iaas/openstack.html#creating-the-novarc-file">Creating the novarc file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../iaas/openstack.html#list-flavors">List flavors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../iaas/openstack.html#list-images">List images</a></li>
<li class="toctree-l4"><a class="reference internal" href="../iaas/openstack.html#key-management">Key management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../iaas/openstack.html#managing-security-groups">Managing security groups</a></li>
<li class="toctree-l4"><a class="reference internal" href="../iaas/openstack.html#booting-an-image">Booting an image</a></li>
<li class="toctree-l4"><a class="reference internal" href="../iaas/openstack.html#list-running-images">List running images</a></li>
<li class="toctree-l4"><a class="reference internal" href="../iaas/openstack.html#use-block-storage">Use block storage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../iaas/openstack.html#set-up-external-access-to-your-instance">Set up external access to your instance</a></li>
<li class="toctree-l4"><a class="reference internal" href="../iaas/openstack.html#make-a-snapshot-of-an-instance">Make a snapshot of an instance</a></li>
<li class="toctree-l4"><a class="reference internal" href="../iaas/openstack.html#automate-some-initial-configuration">Automate some initial configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../iaas/openstack.html#get-the-latest-version-of-ubuntu-cloud-image-and-upload-it-to-the-openstack">Get the latest version of Ubuntu Cloud Image and upload it to the OpenStack</a></li>
<li class="toctree-l4"><a class="reference internal" href="../iaas/openstack.html#delete-your-instance">Delete your instance</a></li>
<li class="toctree-l4"><a class="reference internal" href="../iaas/openstack.html#how-to-change-your-password">How to change your password</a></li>
<li class="toctree-l4"><a class="reference internal" href="../iaas/openstack.html#things-to-do-when-you-need-euca2ools-or-ec2-interfaces">Things to do when you need Euca2ools or EC2 interfaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="../iaas/openstack.html#horizon-gui">Horizon GUI</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">PaaS</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="">Using Hadoop in FutureGrid</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#running-hadoop-as-a-batch-job-using-myhadoop">Running Hadoop as a Batch Job using MyHadoop</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#myhadoop-on-futuregrid">myHadoop on FutureGrid</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#login-into-a-machine-tha-has-myhadoop-installed">Login into a machine tha has myHadoop installed</a></li>
<li class="toctree-l5"><a class="reference internal" href="#load-the-needed-modules">Load the needed modules</a></li>
<li class="toctree-l5"><a class="reference internal" href="#run-the-example">Run the Example</a></li>
<li class="toctree-l5"><a class="reference internal" href="#details-of-the-script">Details of the Script</a></li>
<li class="toctree-l5"><a class="reference internal" href="#submission-of-the-hadoop-job">Submission of the Hadoop job</a></li>
<li class="toctree-l5"><a class="reference internal" href="#persistent-mode">Persistent Mode</a></li>
<li class="toctree-l5"><a class="reference internal" href="#customizing-hadoop-settings">Customizing Hadoop Settings</a></li>
<li class="toctree-l5"><a class="reference internal" href="#using-a-different-installation-of-hadoop">Using a Different Installation of Hadoop</a></li>
<li class="toctree-l5"><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../hpc/index.html">HPC</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../hpc/index.html#login-nodes">Login Nodes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../hpc/index.html#ssh-add">SSH Add</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hpc/index.html#ssh-config">SSH Config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hpc/index.html#modules">Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hpc/index.html#filesystem-layout">Filesystem Layout</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../hpc/index.html#message-passing-interface-mpi">Message Passing Interface (MPI)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../hpc/index.html#mpi-libraries">MPI Libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hpc/index.html#compiling-mpi-applications">Compiling MPI Applications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hpc/index.html#batch-jobs">Batch Jobs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../hpc/index.html#job-management">Job Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../hpc/index.html#job-submission">Job Submission</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hpc/index.html#job-deletion">Job Deletion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hpc/index.html#job-monitoring">Job Monitoring</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hpc/index.html#job-output">Job Output</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../hpc/index.html#xray-hpc-services">Xray HPC Services</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../hpc/index.html#submitting-a-job-on-xray">Submitting a Job on xray</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../hpc/index.html#interactive-queues">Interactive Queues</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../rst.html">reStructuredText</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../rst.html#sections">Sections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rst.html#exceltable">Exceltable</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rst.html#autorun">Autorun</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rst.html#todo">Todo</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Using Hadoop in FutureGrid</a><ul>
<li><a class="reference internal" href="#running-hadoop-as-a-batch-job-using-myhadoop">Running Hadoop as a Batch Job using MyHadoop</a><ul>
<li><a class="reference internal" href="#myhadoop-on-futuregrid">myHadoop on FutureGrid</a><ul>
<li><a class="reference internal" href="#login-into-a-machine-tha-has-myhadoop-installed">Login into a machine tha has myHadoop installed</a></li>
<li><a class="reference internal" href="#load-the-needed-modules">Load the needed modules</a></li>
<li><a class="reference internal" href="#run-the-example">Run the Example</a></li>
<li><a class="reference internal" href="#details-of-the-script">Details of the Script</a></li>
<li><a class="reference internal" href="#submission-of-the-hadoop-job">Submission of the Hadoop job</a></li>
<li><a class="reference internal" href="#persistent-mode">Persistent Mode</a></li>
<li><a class="reference internal" href="#customizing-hadoop-settings">Customizing Hadoop Settings</a></li>
<li><a class="reference internal" href="#using-a-different-installation-of-hadoop">Using a Different Installation of Hadoop</a></li>
<li><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="index.html" title="Previous Chapter: PaaS"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; PaaS</span>
    </a>
  </li>
  <li>
    <a href="../hpc/index.html" title="Next Chapter: HPC"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">HPC &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../_sources/paas/hadoop.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary">
<h4 class="nav-header">Site Contents</h4>

  <ul class="nav nav-list">  
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ipython/index.html">IPython</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parallel.html">Parallel Shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cloudmesh/index.html">Cloudmesh</a></li>
<li class="toctree-l1"><a class="reference internal" href="../iaas/index.html">IaaS</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">PaaS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hpc/index.html">HPC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rst.html">reStructuredText</a></li>
</ul>

  </ul>

<h4 class="nav-header">Notebooks</h4>
  <ul class="nav nav-list">
    <li> <a href="index_notebooks.html"> List </a> </li>
  </ul>
  
<h4 class="nav-header">Page Contents</h4><ul>
<li><a class="reference internal" href="#">Using Hadoop in FutureGrid</a><ul>
<li><a class="reference internal" href="#running-hadoop-as-a-batch-job-using-myhadoop">Running Hadoop as a Batch Job using MyHadoop</a><ul>
<li><a class="reference internal" href="#myhadoop-on-futuregrid">myHadoop on FutureGrid</a><ul>
<li><a class="reference internal" href="#login-into-a-machine-tha-has-myhadoop-installed">Login into a machine tha has myHadoop installed</a></li>
<li><a class="reference internal" href="#load-the-needed-modules">Load the needed modules</a></li>
<li><a class="reference internal" href="#run-the-example">Run the Example</a></li>
<li><a class="reference internal" href="#details-of-the-script">Details of the Script</a></li>
<li><a class="reference internal" href="#submission-of-the-hadoop-job">Submission of the Hadoop job</a></li>
<li><a class="reference internal" href="#persistent-mode">Persistent Mode</a></li>
<li><a class="reference internal" href="#customizing-hadoop-settings">Customizing Hadoop Settings</a></li>
<li><a class="reference internal" href="#using-a-different-installation-of-hadoop">Using a Different Installation of Hadoop</a></li>
<li><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

<form action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
<div id="sourcelink">
  <a href="../_sources/paas/hadoop.txt"
     rel="nofollow">Source</a>
</div>
        </div>
      </div>
    <div class="col-md-9">
      
  <div class="section" id="using-hadoop-in-futuregrid">
<span id="s-hadoop"></span><h1>Using Hadoop in FutureGrid<a class="headerlink" href="#using-hadoop-in-futuregrid" title="Permalink to this headline">¶</a></h1>
<div class="sidebar">
<p class="first sidebar-title">Screencast</p>
<p class="last">A screnncast of a subset of the information presented her is
avalable at <img alt="video-image" src="../_images/glyphicons_402_youtube.png" /> <a class="reference external" href="http://www.youtube.com/watch?v=PC8h1CtVzH4">PC8h1CtVzH4</a>.</p>
</div>
<p>We have various platforms that support Hadoop on FutureGrid. MyHadoop
is probably the easiest solution offered for you. It provides the
advantage that it is integrated into the queuing system and allows
hadoop jobs to be run as batch job. This is of especial interest for
classes that may run quickly out of resources if every students wants
to run their hadoop application at the same time.</p>
<div class="section" id="running-hadoop-as-a-batch-job-using-myhadoop">
<span id="s-myhadoop"></span><h2>Running Hadoop as a Batch Job using MyHadoop<a class="headerlink" href="#running-hadoop-as-a-batch-job-using-myhadoop" title="Permalink to this headline">¶</a></h2>
<p>MapReduce is a programming model developed by Google. Their
definition of MapReduce is as follows:  &#8220;MapReduce is a programming
model and an associated implementation for processing and generating
large data sets. Users specify a map function that processes a key/value
pair to generate a set of intermediate key/value pairs, and a reduce
function that merges all intermediate values associated with the same
intermediate key.&#8221;  For more information about MapReduce, please see the
Google paper <a class="reference external" href="http://labs.google.com/papers/mapreduce.html">here</a>.</p>
<p>The <a class="reference external" href="http://hadoop.apache.org">Apache Hadoop Project</a> provides an
open source implementation of MapReduce and HDFS (Hadoop Distributed
File System).</p>
<p>This tutorial illustrates how to run Apache Hadoop thru the batch
systems on FutureGrid using the MyHadoop tool.</p>
<div class="section" id="myhadoop-on-futuregrid">
<h3>myHadoop on FutureGrid<a class="headerlink" href="#myhadoop-on-futuregrid" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://sourceforge.net/projects/myhadoop/">MyHadoop</a> is a set of
scripts that configure and instantiate Hadoop as a batch job.</p>
<p>myHadoop 0.20.2 is currently installed on Alamo, Hotel, India, and Sierra
FutureGrid systems.</p>
<div class="section" id="login-into-a-machine-tha-has-myhadoop-installed">
<h4>Login into a machine tha has myHadoop installed<a class="headerlink" href="#login-into-a-machine-tha-has-myhadoop-installed" title="Permalink to this headline">¶</a></h4>
<p>To run the example we need to firts log into a FutureGrid system that
has myHadoop available.  In this tutorial, we are executing from the sierral machine:</p>
<div class="highlight-python"><div class="highlight"><pre>$ ssh portalname@sierra.futuregrid.org
</pre></div>
</div>
<p>Note that this also works on other FutureGrid machines such as india.</p>
<p>This machine accepts SSH public key and One Time Password (OTP) logins
only.  If you do not have a public key set up, you will be prompted
for a password.  This is <em>not</em> your FutureGrid password, but the One
Time Password generated from your OTP token.  Do not type your
FutureGrid password, it will not work.  If you do not have a token or
public key, you will not be able to login.  The portalname is your
account name that allows you to log into the FutureGrid portal.</p>
</div>
<div class="section" id="load-the-needed-modules">
<h4>Load the needed modules<a class="headerlink" href="#load-the-needed-modules" title="Permalink to this headline">¶</a></h4>
<p>Next, we need to load the myHadoop module.  On some FutureGrid
systems, you may also need to load the &#8220;torque&#8221; module as well if
qstat is not already in your environment:</p>
<div class="highlight-python"><div class="highlight"><pre>$ module load myhadoop
SUN Java JDK version 1.6.0 (x86_64 architecture) loaded
Apache Hadoop Common version 0.20.203.0 loaded
myHadoop version 0.2a loaded
</pre></div>
</div>
<p>Before we can submit it we still need to load the module java as
Haddop relies on java:</p>
<div class="highlight-python"><div class="highlight"><pre>module add java
</pre></div>
</div>
</div>
<div class="section" id="run-the-example">
<h4>Run the Example<a class="headerlink" href="#run-the-example" title="Permalink to this headline">¶</a></h4>
<p>To run the example we need to create a script to tell the queing
system how to run it. We are providing the following script that you
can store in a file pbs-example.sh.</p>
<p>You can paste and copy it from here, or just copy it via:</p>
<div class="highlight-python"><div class="highlight"><pre>cp $MY_HADOOP_HOME/pbs-example.sh .
</pre></div>
</div>
<p>This script includes information about
which queue hadoop should be run in. To find out more about the
queuing system, please see the HPC services section. The pbs-example.sh
script we use in this example looks as follows:</p>
<div class="highlight-python"><div class="highlight"><pre>#!/bin/bash

#PBS -q batch
#PBS -N hadoop_job
#PBS -l nodes=4:ppn=8
#PBS -o hadoop_run.out
#PBS -j oe
#PBS -V

module add java

### Run the myHadoop environment script to set the appropriate variables
#
# Note: ensure that the variables are set correctly in bin/setenv.sh
. /N/soft/myHadoop/bin/setenv.sh

#### Set this to the directory where Hadoop configs should be generated
# Don&#39;t change the name of this variable (HADOOP_CONF_DIR) as it is
# required by Hadoop - all config files will be picked up from here
#
# Make sure that this is accessible to all nodes
export HADOOP_CONF_DIR=&quot;${HOME}/myHadoop-config&quot;

#### Set up the configuration
# Make sure number of nodes is the same as what you have requested from PBS
# usage: $MY_HADOOP_HOME/bin/pbs-configure.sh -h
echo &quot;Set up the configurations for myHadoop&quot;
# this is the non-persistent mode
$MY_HADOOP_HOME/bin/pbs-configure.sh -n 4 -c $HADOOP_CONF_DIR
# this is the persistent mode
# $MY_HADOOP_HOME/bin/pbs-configure.sh -n 4 -c $HADOOP_CONF_DIR -p -d /oasis/cloudstor-group/HDFS
echo

#### Format HDFS, if this is the first time or not a persistent instance
echo &quot;Format HDFS&quot;
$HADOOP_HOME/bin/hadoop --config $HADOOP_CONF_DIR namenode -format
echo

#### Start the Hadoop cluster
echo &quot;Start all Hadoop daemons&quot;
$HADOOP_HOME/bin/start-all.sh
#$HADOOP_HOME/bin/hadoop dfsadmin -safemode leave
echo

#### Run your jobs here
echo &quot;Run some test Hadoop jobs&quot;
$HADOOP_HOME/bin/hadoop --config $HADOOP_CONF_DIR dfs -mkdir Data
$HADOOP_HOME/bin/hadoop --config $HADOOP_CONF_DIR dfs -copyFromLocal $MY_HADOOP_HOME/gutenberg Data
$HADOOP_HOME/bin/hadoop --config $HADOOP_CONF_DIR dfs -ls Data/gutenberg
$HADOOP_HOME/bin/hadoop --config $HADOOP_CONF_DIR jar $HADOOP_HOME/hadoop-0.20.2-examples.jar wordcount Data/gutenberg Outputs
$HADOOP_HOME/bin/hadoop --config $HADOOP_CONF_DIR dfs -ls Outputs
$HADOOP_HOME/bin/hadoop --config $HADOOP_CONF_DIR dfs -copyToLocal Outputs ${HOME}/Hadoop-Outputs
echo

#### Stop the Hadoop cluster
echo &quot;Stop all Hadoop daemons&quot;
$HADOOP_HOME/bin/stop-all.sh
echo

#### Clean up the working directories after job completion
echo &quot;Clean up&quot;
$MY_HADOOP_HOME/bin/pbs-cleanup.sh -n 4 -c $HADOOP_CONF_DIR
echo
</pre></div>
</div>
</div>
<div class="section" id="details-of-the-script">
<h4>Details of the Script<a class="headerlink" href="#details-of-the-script" title="Permalink to this headline">¶</a></h4>
<p>Let us examine this script in more detail. In the example script, a temporary directory to store Hadoop
configuration files is specified as ${HOME}/myHadoop-config:</p>
<div class="highlight-python"><div class="highlight"><pre>#### Set this to the directory where Hadoop configs should be generated
# Don&#39;t change the name of this variable (HADOOP_CONF_DIR) as it is
# required by Hadoop - all config files will be picked up from here
#
# Make sure that this is accessible to all nodes
export HADOOP_CONF_DIR=&quot;${HOME}/myHadoop-config&quot;
</pre></div>
</div>
<p>The pbs-example.sh script runs the &#8220;wordcount&#8221; program from
the hadoop-0.20.2-examples.jar.  There is sample text data from the
<a class="reference external" href="http://www.gutenberg.org/">Project Gutenberg website</a> located a
$MY_HADOOP_HOME/gutenberg:</p>
<div class="highlight-python"><div class="highlight"><pre>$ ls $MY_HADOOP_HOME/gutenberg
1342.txt.utf8
</pre></div>
</div>
<p>The following lines in the script create a data directory in HDFS. This directory is
specified in $MY_HADOOP_HOME/bin/setenv.sh. To activate the
environment, pleas execute:</p>
<div class="highlight-python"><div class="highlight"><pre>source $MY_HADOOP_HOME/bin/setenv.sh
</pre></div>
</div>
<p>The next lines in the script will copy over the gutenberg data, executes the Hadoop
job, and then copies the output back your ${HOME}/Hadoop-Outputs
directory.</p>
<div class="highlight-python"><div class="highlight"><pre>#### Run your jobs here
echo &quot;Run some test Hadoop jobs&quot;
$HADOOP_HOME/bin/hadoop --config $HADOOP_CONF_DIR dfs -mkdir Data
$HADOOP_HOME/bin/hadoop --config $HADOOP_CONF_DIR dfs -copyFromLocal $MY_HADOOP_HOME/gutenberg Data
$HADOOP_HOME/bin/hadoop --config $HADOOP_CONF_DIR dfs -ls Data/gutenberg
$HADOOP_HOME/bin/hadoop --config $HADOOP_CONF_DIR jar $HADOOP_HOME/hadoop-0.20.2-examples.jar wordcount Data/gutenberg Outputs
$HADOOP_HOME/bin/hadoop --config $HADOOP_CONF_DIR dfs -ls Outputs
$HADOOP_HOME/bin/hadoop --config $HADOOP_CONF_DIR dfs -copyToLocal Outputs ${HOME}/Hadoop-Outputs
</pre></div>
</div>
</div>
<div class="section" id="submission-of-the-hadoop-job">
<h4>Submission of the Hadoop job<a class="headerlink" href="#submission-of-the-hadoop-job" title="Permalink to this headline">¶</a></h4>
<p>Now submit the pbs-example.sh script to Hotel:</p>
<div class="highlight-python"><div class="highlight"><pre>$ qsub $MY_HADOOP_HOME/pbs-example.sh
40256.svc.uc.futuregrid.org
</pre></div>
</div>
<p>The job will take about 5 minutes to complete.  To monitor its
status, type &#8216;qstat&#8217;.  The &#8220;R&#8221; means the job is running:</p>
<div class="highlight-python"><div class="highlight"><pre>$ qstat
Job id                    Name             User            Time Use S Queue
------------------------- ---------------- --------------- -------- - -----
40256.svc                  hadoop_job       albert                0 R batch
</pre></div>
</div>
<p>When it is done, the status of the job will be &#8220;C&#8221; meaning the job has
completed (or it will no longer be displayed in qstat output).  You
should see a new hadoop_run.out file and an &#8220;Hadoop-Outputs&#8221; directory</p>
<div class="highlight-python"><div class="highlight"><pre>$ qstat
Job id                    Name             User            Time Use S Queue
------------------------- ---------------- --------------- -------- - -----
40256.svc                  hadoop_job       albert         00:00:05 C batch
$ ls
Hadoop-Outputs hadoop_run.out
</pre></div>
</div>
<p>View results of the word count operation:</p>
<div class="highlight-python"><div class="highlight"><pre>$ head Hadoop-Outputs/part-r-00000
&quot;&#39;After    1
&quot;&#39;My   1
&quot;&#39;Tis  2
&quot;A 12
&quot;About 2
&quot;Ah!   2
&quot;Ah!&quot; 1
&quot;Ah,   1
&quot;All   2
&quot;All!  1
</pre></div>
</div>
<p>Now to run you own custom Hadoop job, make a copy of the
$MY_HADOOP_HOME/pbs-example.sh script and modify the lines described
in Step 7.</p>
</div>
<div class="section" id="persistent-mode">
<h4>Persistent Mode<a class="headerlink" href="#persistent-mode" title="Permalink to this headline">¶</a></h4>
<p>The above example copies input to local HDFS scratch space you specified
in $MY_HADOOP_HOME/bin/setenv.sh, runs MapReduce, and copies output
from HDFS back to your home directory.  This is called non-persistent
mode and is good for small amounts of data.  Alternatively, you can run
in persistent mode which is good if you have access to a parallel file
system or have a large amount of data that will not fit in scratch
space.  To enable persistent mode, follow the directions in
pbs-example.sh.</p>
</div>
<div class="section" id="customizing-hadoop-settings">
<h4>Customizing Hadoop Settings<a class="headerlink" href="#customizing-hadoop-settings" title="Permalink to this headline">¶</a></h4>
<p>To modify any of the Hadoop settings
like maximum_number_of_map_task, maximum_number_of_reduce_task,
etc., make you own copy of myHadoop and customize the settings
accordingly.  For example:</p>
<ol class="arabic">
<li><p class="first">Copy the $MY_HADOOP_HOME directory to your home directory:</p>
<div class="highlight-python"><div class="highlight"><pre>$ cp -r $MY_HADOOP_HOME $HOME/myHadoop
</pre></div>
</div>
</li>
<li><p class="first">Then edit $HOME/myHadoop/pbs-example.sh and on line 16, replace it
with:</p>
<div class="highlight-python"><div class="highlight"><pre>. ${HOME}/myHadoop/bin/setenv.sh
</pre></div>
</div>
</li>
<li><p class="first">Similarly edit $HOME/myHadoop/bin/setenv.sh and on line 4, replace it
with:</p>
<div class="highlight-python"><div class="highlight"><pre>export MY_HADOOP_HOME=$HOME/myHadoop
</pre></div>
</div>
</li>
<li><p class="first">Customize the settings in the Hadoop files as needed in
$HOME/myHadoop/etc</p>
</li>
<li><p class="first">Submit your copy of pbs-example.sh:</p>
<div class="highlight-python"><div class="highlight"><pre>$ qsub $HOME/myHadoop/pbs-example.sh
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="using-a-different-installation-of-hadoop">
<h4>Using a Different Installation of Hadoop<a class="headerlink" href="#using-a-different-installation-of-hadoop" title="Permalink to this headline">¶</a></h4>
<p>If you would like to use a different version of my Hadoop or have
customized the Hadoop code in some way, you can specify a different
installation of Hadoop by redefining the HADOOP_HOME variable after
$MY_HADOOP_HOME/bin/setenv.sh is called within your own copy of
pbs-example.sh:</p>
<div class="highlight-python"><div class="highlight"><pre>### Run the myHadoop environment script to set the appropriate variables
#
# Note: ensure that the variables are set correctly in bin/setenv.sh
. /opt/myHadoop/bin/setenv.sh
export HADOOP_HOME=${HOME}/my-custom-hadoop
</pre></div>
</div>
</div>
<div class="section" id="references">
<h4>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Much of this information is copied from <a class="reference external" href="https://portal.futuregrid.org/sites/default/files/myHadoop.pdf">The MyHadoop Instalation Instructions</a></li>
<li>A screnncast of a subset of the information presented her is
avalable at <img alt="video-image" src="../_images/glyphicons_402_youtube.png" /> <a class="reference external" href="http://www.youtube.com/watch?v=PC8h1CtVzH4">PC8h1CtVzH4</a>.</li>
</ul>
</div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2013, Gregor von Laszewski for FutureGrid.<br/>
    </p>
  </div>
</footer>
  </body>
</html>